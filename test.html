<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Researcher Introduction Chat</title>
    <style>
        /* Reset default margins and padding, set default font and background color */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        /* Main chat container */
        .chat-container {
            display: flex;
            flex-direction: column;
            max-width: 600px;
            height: 100vh;
            margin: 0 auto;
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            background-color: #fff;
        }

        /* Chat header styling */
        .chat-header {
            padding: 20px;
            background-color: #007bff;
            color: #fff;
            text-align: center;
            font-size: 1.5em;
        }

        /* Messages container */
        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Individual message styling */
        .message {
            display: none; /* Hide messages initially */
            display: flex;
            margin-bottom: 15px;
        }

        /* Sent messages align to the right */
        .message.sent {
            justify-content: flex-end;
        }

        /* Message content styling */
        .message .content {
            max-width: 70%;
            width: auto;
            padding: 10px 15px;
            border-radius: 20px;
            background-color: #e9e9eb;
            position: relative;
        }

        /* Styling for sent messages */
        .message.sent .content {
            background-color: #007bff;
            color: #fff;
        }

        /* Message tail styling */
        .message .content::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
        }

        /* Tail for received messages */
        .message.received .content::after {
            left: -10px;
            border: 10px solid transparent;
            border-top-color: #e9e9eb;
            border-bottom: 0;
            border-right: 0;
            margin-left: -10px;
            margin-bottom: -10px;
        }

        /* Tail for sent messages */
        .message.sent .content::after {
            right: -10px;
            border: 10px solid transparent;
            border-top-color: #007bff;
            border-bottom: 0;
            border-left: 0;
            margin-right: -10px;
            margin-bottom: -10px;
        }

        /* Tags container styling */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            padding: 10px 20px;
            background-color: #fff;
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }

        /* Tag buttons styling */
        .tag-button {
            background-color: #e9e9eb;
            border: none;
            border-radius: 15px;
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.9em;
            color: #333;
            outline: none;
        }

        .tag-button:hover {
            background-color: #d4d4d6;
        }

        .tag-button:active {
            background-color: #bcbcc0;
        }

        /* Input container styling */
        .input-container {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background-color: #f5f5f5;
            border-top: 1px solid #ddd;
        }

        /* Input field styling */
        .input-container input[type="text"] {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            background-color: #e9e9eb;
            font-size: 1em;
            outline: none;
        }

        /* Placeholder text color */
        .input-container input[type="text"]::placeholder {
            color: #999;
        }

        /* Send button styling */
        .input-container button {
            margin-left: 10px;
            padding: 12px;
            border: none;
            background-color: #007bff;
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            outline: none;
        }

        /* Hover effect for send button */
        .input-container button:hover {
            background-color: #0056b3;
        }

        /* Active effect for send button */
        .input-container button:active {
            background-color: #004085;
        }

        /* Animation for message appearance */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.sent.appear,
        .message.received.appear {
            animation: fadeIn 0.3s ease forwards;
        }

        /* Styling for social links message */
        .message .content.social-links {
            /* Inherit the same styling as other messages */
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #e9e9eb;
            padding: 10px 15px;
            border-radius: 20px;
            position: relative;
        }

        /* Adjust the tail for the social links bubble */
        .message .content.social-links::after {
            content: '';
            position: absolute;
            left: -10px;
            bottom: 0;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #e9e9eb;
            border-bottom: 0;
            border-right: 0;
            margin-left: -10px;
            margin-bottom: -10px;
        }

        .message .content.social-links .header {
            font-size: 1em;
            margin-bottom: 10px;
            width: 100%;
            text-align: center;
        }

        .message .content.social-links .icons {
            display: flex;
            justify-content: center;
            opacity: 0;
            /* Fade-in animation */
            animation: fadeInIcons 0.5s ease forwards;
            animation-delay: 0.5s;
        }

        .message .content.social-links a {
            margin: 0 15px;
        }

        .message .content.social-links svg {
            width: 40px;
            height: 40px;
            cursor: pointer;
        }

        /* Fade-in animation for icons */
        @keyframes fadeInIcons {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>
    <!-- Main chat container -->
    <div class="chat-container">
        <!-- Chat header -->
        <div class="chat-header">
            Meet the Researcher
        </div>
        <!-- Messages area -->
        <div class="messages">
            <!-- Messages will be dynamically added here -->
        </div>
        <!-- Tags container -->
        <div class="tags-container">
            <!-- Clickable tags -->
            <button class="tag-button" data-message="introduction">Introduction</button>
            <button class="tag-button" data-message="research">Research Interests</button>
            <button class="tag-button" data-message="projects">Recent Projects</button>
            <button class="tag-button" data-message="contact">Contact Information</button>
        </div>
        <!-- Input area -->
        <div class="input-container">
            <!-- Text input for user's message -->
            <input type="text" id="message-input" placeholder="Type your message here...">
            <!-- Send button with onclick event -->
            <button id="send-button" onclick="sendMessage()">
                <!-- Send icon -->
                &#10148;
            </button>
        </div>
    </div>

    <!-- JavaScript for handling message sending and tag clicks -->
    <script>
        // Predefined messages corresponding to each tag
        const predefinedMessages = {
            introduction: "Hello! I'm Dr. Emily Smith, a neuroscientist at ABC University. I'd love to share more about my research with you.",
            research: "Certainly! My primary research focuses on neuroplasticity and how the brain adapts after injury. I'm also interested in cognitive rehabilitation techniques.",
            projects: "Recently, my team has been working on developing non-invasive brain stimulation methods to enhance recovery in stroke patients.",
            contact: "You're welcome! Feel free to visit my lab's website at <a href='http://www.emilysmithlab.com'>www.emilysmithlab.com</a> or email me at emily.smith@abcuniversity.edu."
        };

        // Function to display a message with typing animation
        function displayMessage(messageText) {
            // Create a new message element
            const message = document.createElement('div');
            message.classList.add('message', 'received', 'appear'); // Received message with animation

            const content = document.createElement('div');
            content.classList.add('content');

            // Append content to message
            message.appendChild(content);

            const messagesContainer = document.querySelector('.messages');
            messagesContainer.appendChild(message);

            // Show the message element
            message.style.display = 'flex';

            // Initialize typing effect
            const speed = 50; // milliseconds per character

            typeHtml(content, messageText, speed);

            // Scroll to the bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Typing function that handles HTML content
        function typeHtml(element, html, speed) {
            let cursorPosition = 0,
                tag = '',
                writingTag = false,
                tagOpen = false,
                tempTypeSpeed = speed;

            function type() {
                if (writingTag) {
                    tag += html[cursorPosition];
                }

                if (html[cursorPosition] === '<') {
                    tempTypeSpeed = 0;
                    writingTag = true;
                    tag += html[cursorPosition];
                } else if (html[cursorPosition] === '>') {
                    tag += html[cursorPosition];
                    writingTag = false;

                    // Append the tag to the element
                    element.innerHTML += tag;
                    tag = '';
                } else if (writingTag) {
                    tag += html[cursorPosition];
                } else {
                    element.innerHTML += html[cursorPosition];
                }

                cursorPosition++;

                if (cursorPosition < html.length) {
                    setTimeout(type, tempTypeSpeed);
                }
            }

            type();
        }

        // Function to display the user's message
        function displayUserMessage(messageText) {
            // Create a new message element
            const message = document.createElement('div');
            message.classList.add('message', 'sent', 'appear'); // Sent message with animation

            // Create the content div and set its text
            const content = document.createElement('div');
            content.classList.add('content');
            content.textContent = messageText;

            // Append the content to the message element
            message.appendChild(content);

            // Append the message to the messages container
            const messagesContainer = document.querySelector('.messages');
            messagesContainer.appendChild(message);

            // Scroll to the bottom to show the new message
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Function to display social links after contact information
        function displaySocialLinks() {
            // Create a new message element
            const message = document.createElement('div');
            message.classList.add('message', 'received', 'appear'); // Received message with animation

            const content = document.createElement('div');
            content.classList.add('content', 'social-links'); // Add 'social-links' class for styling

            // Create header element
            const header = document.createElement('div');
            header.classList.add('header');
            content.appendChild(header);

            // Append content to message
            message.appendChild(content);

            const messagesContainer = document.querySelector('.messages');
            messagesContainer.appendChild(message);

            // Show the message element
            message.style.display = 'flex';

            // Initialize typing effect for header
            const headerText = "Connect with me on:";
            const speed = 50; // milliseconds per character

            typeHtml(header, headerText, speed);

            // SVG code for GitHub and LinkedIn icons
            const githubSVG = `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h24v24h-24z" fill="#fff" opacity="0" transform="matrix(-1 0 0 -1 24 24)"/><path d="m12 1a10.89 10.89 0 0 0 -11 10.77 10.79 10.79 0 0 0 7.52 10.23c.55.1.75-.23.75-.52s0-.93 0-1.83c-3.06.65-3.71-1.44-3.71-1.44a2.86 2.86 0 0 0 -1.22-1.58c-1-.66.08-.65.08-.65a2.31 2.31 0 0 1 1.68 1.11 2.37 2.37 0 0 0 3.2.89 2.33 2.33 0 0 1 .7-1.44c-2.44-.27-5-1.19-5-5.32a4.15 4.15 0 0 1 1.11-2.91 3.78 3.78 0 0 1 .11-2.84s.93-.29 3 1.1a10.68 10.68 0 0 1 5.5 0c2.1-1.39 3-1.1 3-1.1a3.78 3.78 0 0 1 .11 2.84 4.15 4.15 0 0 1 1.17 2.89c0 4.14-2.58 5.05-5 5.32a2.5 2.5 0 0 1 .75 2v2.95s.2.63.75.52a10.8 10.8 0 0 0 7.5-10.22 10.89 10.89 0 0 0 -11-10.77" fill="#231f20"/></svg>`;

            const linkedinSVG = `<svg enable-background="new 0 0 112.196 112.196" viewBox="0 0 112.196 112.196" xmlns="http://www.w3.org/2000/svg"><circle cx="56.098" cy="56.097" fill="#007ab9" r="56.098"/><path d="m89.616 60.611v23.128h-13.409v-21.578c0-5.418-1.936-9.118-6.791-9.118-3.705 0-5.906 2.491-6.878 4.903-.353.862-.444 2.059-.444 3.268v22.524h-13.41s.18-36.546 0-40.329h13.411v5.715c-.027.045-.065.089-.089.132h.089v-.132c1.782-2.742 4.96-6.662 12.085-6.662 8.822 0 15.436 5.764 15.436 18.149zm-54.96-36.642c-4.587 0-7.588 3.011-7.588 6.967 0 3.872 2.914 6.97 7.412 6.97h.087c4.677 0 7.585-3.098 7.585-6.97-.089-3.956-2.908-6.967-7.496-6.967zm-6.791 59.77h13.405v-40.33h-13.405z" fill="#f1f2f2"/></svg>`;

            // Create the SVG links
            const githubLink = document.createElement('a');
            githubLink.href = 'https://github.com';
            githubLink.target = '_blank';
            githubLink.innerHTML = githubSVG;

            const linkedinLink = document.createElement('a');
            linkedinLink.href = 'https://linkedin.com';
            linkedinLink.target = '_blank';
            linkedinLink.innerHTML = linkedinSVG;

            // Create a container for the icons
            const iconsContainer = document.createElement('div');
            iconsContainer.classList.add('icons');
            iconsContainer.appendChild(githubLink);
            iconsContainer.appendChild(linkedinLink);

            // Append the icons after the header typing effect
            setTimeout(() => {
                content.appendChild(iconsContainer);
                // Scroll to the bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, headerText.length * speed + 500);

            // Scroll to the bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Add event listeners to the tag buttons
        const tagButtons = document.querySelectorAll('.tag-button');
        tagButtons.forEach(button => {
            button.addEventListener('click', function handleClick() {
                const messageKey = button.getAttribute('data-message');
                const messageText = predefinedMessages[messageKey];

                // Get the label of the tag button to display in the user's message bubble
                const userMessageText = button.textContent;

                // Display the user's message bubble
                displayUserMessage(userMessageText);

                // Display the assistant's message with typing effect
                displayMessage(messageText);

                // If the 'contact' tag is clicked, display the second message with SVGs
                if (messageKey === 'contact') {
                    // Delay the display of social links until after typing animation
                    setTimeout(displaySocialLinks, messageText.length * 50 + 500);
                }

                // Remove the clicked tag from the tag list
                button.removeEventListener('click', handleClick); // Remove event listener
                button.parentNode.removeChild(button); // Remove the button from DOM
            });
        });

        function sendMessage() {
            // Get the input field and its value
            const input = document.getElementById('message-input');
            const messageText = input.value.trim();

            // If the input is empty, do nothing
            if (messageText === '') {
                return;
            }

            // Display the user's message
            displayUserMessage(messageText);

            // Clear the input field
            input.value = '';

            // Process the message
            const lowerCaseMessage = messageText.toLowerCase();

            // Check for keywords and display corresponding messages
            if (lowerCaseMessage.includes('intro')) {
                displayMessage(predefinedMessages['introduction']);
            } else if (lowerCaseMessage.includes('research')) {
                displayMessage(predefinedMessages['research']);
            } else if (lowerCaseMessage.includes('project')) {
                displayMessage(predefinedMessages['projects']);
            } else if (lowerCaseMessage.includes('contact')) {
                displayMessage(predefinedMessages['contact']);
                // Display social links after typing effect
                setTimeout(displaySocialLinks, predefinedMessages['contact'].length * 50 + 500);
            } else {
                // Handle unrecognized input
                displayMessage("I'm sorry, I didn't understand that. Could you please choose a topic or type 'intro', 'research', 'project', or 'contact'?");
            }
        }
    </script>
</body>
</html>
