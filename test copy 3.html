<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Researcher Introduction Chat</title>
    <style>
        /* Reset default margins and padding, set default font and background color */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        /* Main chat container */
        .chat-container {
            display: flex;
            flex-direction: column;
            max-width: 600px;
            height: 100vh;
            margin: 0 auto;
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            background-color: #fff;
        }

        /* Chat header styling */
        .chat-header {
            padding: 20px;
            background-color: #007bff;
            color: #fff;
            text-align: center;
            font-size: 1.5em;
        }

        /* Messages container */
        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Individual message styling */
        .message {
            display: none; /* Hide messages initially */
            display: flex;
            margin-bottom: 15px;
        }

        /* Sent messages align to the right */
        .message.sent {
            justify-content: flex-end;
        }

        /* Message content styling */
        .message .content {
            max-width: 70%;
            width: auto;
            padding: 10px 15px;
            border-radius: 20px;
            background-color: #e9e9eb;
            position: relative;
        }

        /* Styling for sent messages */
        .message.sent .content {
            background-color: #007bff;
            color: #fff;
        }

        /* Message tail styling */
        .message .content::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
        }

        /* Tail for received messages */
        .message.received .content::after {
            left: -10px;
            border: 10px solid transparent;
            border-top-color: #e9e9eb;
            border-bottom: 0;
            border-right: 0;
            margin-left: -10px;
            margin-bottom: -10px;
        }

        /* Tail for sent messages */
        .message.sent .content::after {
            right: -10px;
            border: 10px solid transparent;
            border-top-color: #007bff;
            border-bottom: 0;
            border-left: 0;
            margin-right: -10px;
            margin-bottom: -10px;
        }

        /* Tags container styling */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            padding: 10px 20px;
            background-color: #fff;
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }

        /* Tag buttons styling */
        .tag-button {
            background-color: #e9e9eb;
            border: none;
            border-radius: 15px;
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.9em;
            color: #333;
            outline: none;
        }

        .tag-button:hover {
            background-color: #d4d4d6;
        }

        .tag-button:active {
            background-color: #bcbcc0;
        }

        /* Input container styling */
        .input-container {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background-color: #f5f5f5;
            border-top: 1px solid #ddd;
        }

        /* Input field styling */
        .input-container input[type="text"] {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            background-color: #e9e9eb;
            font-size: 1em;
            outline: none;
        }

        /* Placeholder text color */
        .input-container input[type="text"]::placeholder {
            color: #999;
        }

        /* Send button styling */
        .input-container button {
            margin-left: 10px;
            padding: 12px;
            border: none;
            background-color: #007bff;
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            outline: none;
        }

        /* Hover effect for send button */
        .input-container button:hover {
            background-color: #0056b3;
        }

        /* Active effect for send button */
        .input-container button:active {
            background-color: #004085;
        }
    </style>
</head>
<body>
    <!-- Main chat container -->
    <div class="chat-container">
        <!-- Chat header -->
        <div class="chat-header">
            Meet the Researcher
        </div>
        <!-- Messages area -->
        <div class="messages">
            <!-- Messages will be dynamically added here -->
        </div>
        <!-- Tags container -->
        <div class="tags-container">
            <!-- Clickable tags -->
            <button class="tag-button" data-message="introduction">Introduction</button>
            <button class="tag-button" data-message="research">Research Interests</button>
            <button class="tag-button" data-message="projects">Recent Projects</button>
            <button class="tag-button" data-message="contact">Contact Information</button>
        </div>
        <!-- Input area -->
        <div class="input-container">
            <!-- Text input for user's message -->
            <input type="text" id="message-input" placeholder="Type your message here...">
            <!-- Send button with onclick event -->
            <button id="send-button" onclick="sendMessage()">
                <!-- Send icon -->
                &#10148;
            </button>
        </div>
    </div>

    <!-- JavaScript for handling message sending and tag clicks -->
    <script>
        // Predefined messages corresponding to each tag
        const predefinedMessages = {
            introduction: "Hello! I'm Dr. Emily Smith, a neuroscientist at ABC University. I'd love to share more about my research with you.",
            research: "Certainly! My primary research focuses on neuroplasticity and how the brain adapts after injury. I'm also interested in cognitive rehabilitation techniques.",
            projects: "Recently, my team has been working on developing non-invasive brain stimulation methods to enhance recovery in stroke patients.",
            contact: "You're welcome! Feel free to visit my lab's website at <a href='http://www.emilysmithlab.com'>www.emilysmithlab.com</a> or email me at emily.smith@abcuniversity.edu."
        };

        // Function to display a message with typing animation
        function displayMessage(messageText) {
            // Create a new message element
            const message = document.createElement('div');
            message.classList.add('message', 'received'); // Received message

            const content = document.createElement('div');
            content.classList.add('content');

            // Append content to message
            message.appendChild(content);

            const messagesContainer = document.querySelector('.messages');
            messagesContainer.appendChild(message);

            // Show the message element
            message.style.display = 'flex';

            // Initialize typing effect
            const speed = 50; // milliseconds per character

            typeHtml(content, messageText, speed);

            // Scroll to the bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Typing function that handles HTML content
        function typeHtml(element, html, speed) {
            let cursorPosition = 0,
                tag = '',
                writingTag = false,
                tagOpen = false,
                tempTypeSpeed = speed;

            function type() {
                if (writingTag) {
                    tag += html[cursorPosition];
                }

                if (html[cursorPosition] === '<') {
                    tempTypeSpeed = 0;
                    writingTag = true;
                    tag += html[cursorPosition];
                } else if (html[cursorPosition] === '>') {
                    tag += html[cursorPosition];
                    writingTag = false;

                    // Append the tag to the element
                    element.innerHTML += tag;
                    tag = '';
                } else if (writingTag) {
                    tag += html[cursorPosition];
                } else {
                    element.innerHTML += html[cursorPosition];
                }

                cursorPosition++;

                if (cursorPosition < html.length) {
                    setTimeout(type, tempTypeSpeed);
                }
            }

            type();
        }

        // Add event listeners to the tag buttons
        const tagButtons = document.querySelectorAll('.tag-button');
        tagButtons.forEach(button => {
            button.addEventListener('click', () => {
                const messageKey = button.getAttribute('data-message');
                const messageText = predefinedMessages[messageKey];
                displayMessage(messageText);
            });
        });

        function sendMessage() {
            // Get the input field and its value
            const input = document.getElementById('message-input');
            const messageText = input.value.trim();

            // If the input is empty, do nothing
            if (messageText === '') {
                return;
            }

            // Create a new message element
            const message = document.createElement('div');
            message.classList.add('message', 'sent'); // Sent message

            // Create the content div and set its text
            const content = document.createElement('div');
            content.classList.add('content');
            content.textContent = messageText;

            // Append the content to the message element
            message.appendChild(content);

            // Append the message to the messages container
            const messagesContainer = document.querySelector('.messages');
            messagesContainer.appendChild(message);

            // Scroll to the bottom to show the new message
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Clear the input field
            input.value = '';

            // Placeholder for additional functionality
            // For example, sending the message to a server or triggering a response
        }
    </script>
</body>
</html>
